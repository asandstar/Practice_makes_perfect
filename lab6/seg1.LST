A51 MACRO ASSEMBLER  SEG1                                                                 12/07/2023 18:23:06 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN seg1.OBJ
ASSEMBLER INVOKED BY: D:\Keil_c51\C51\BIN\A51.EXE seg1.ASM SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     
  008E                 2             AUXR EQU 8EH
0000                   3             ORG 0000H
0000 020200            4             LJMP MAIN
000B                   5             ORG 000BH
000B 020400            6             LJMP T0_ISR
                       7     
0200                   8             ORG 0200H
0200                   9     MAIN:
0200 759300           10             MOV 93H,#00H  ;p0推挽模式,位选通
0203 7594FF           11             MOV 94H,#0FFH
0206 759100           12             MOV 91H,#00H  ;P1推挽模式，段选通
0209 7592FF           13             MOV 92H,#0FFH
020C 759500           14             MOV 95H,#00H  ;P2推挽模式
020F 7596FF           15             MOV 96H,#0FFH
                      16     
0212                  17     P_INIT:
0212 7A7F             18             MOV R2,#01111111B
0214 75403F           19             MOV 40H,#3FH            ;0
0217 754106           20             MOV 41H,#06H            ;1
021A 75425B           21             MOV 42H,#5BH            ;2
021D 75434F           22             MOV 43H,#4FH            ;3
0220 754466           23             MOV 44H,#66H            ;4
0223 75456D           24             MOV 45H,#6DH            ;5
0226 75467D           25             MOV 46H,#7DH            ;6
0229 754707           26             MOV 47H,#07H            ;7
022C 7940             27             MOV R1,#40H                     ;位选通
                      28     
022E                  29     TIMER0_INIT:                    
022E 538E7F           30             ANL     AUXR,#7FH               ;定时器时钟12T模式
0231 5389F0           31             ANL     TMOD,#0F0H              ;设置定时器模式
                      32     
                      33     
                      34     
                      35     
                      36     
                      37     
                      38             ;1毫秒@11.0592MHz
0234 758A66           39             MOV     TL0,#066H               ;设置定时初始值
0237 758CFC           40             MOV     TH0,#0FCH               ;设置定时初始值
                      41     
023A D2A9             42             SETB ET0          ;定时器中断
023C D2AF             43             SETB EA
023E D28C             44             SETB TR0          ;定时器0开始计时
0240 C28D             45             CLR TF0
                      46     
0242 80FE             47             SJMP $
                      48             
                      49                     
0400                  50             ORG 0400H
0400                  51     T0_ISR:
0400 B94805           52             CJNE R1,#48H,SEG        ;位选通后赋值
0403 7940             53             MOV R1,#40H                     ;重新位选通
0405 8001             54             SJMP SEG                
0407 32               55             RETI
0408                  56     SEG:
0408 EA               57             MOV A,R2
0409 23               58             RL A                      ;下一位！
A51 MACRO ASSEMBLER  SEG1                                                                 12/07/2023 18:23:06 PAGE     2

040A F580             59             MOV P0,A
040C FA               60             MOV R2,A
                      61     
040D E7               62             MOV A,@R1                ;段选通
040E F590             63             MOV P1,A
0410 09               64             INC R1          
0411 32               65             RETI
                      66             END
                             
A51 MACRO ASSEMBLER  SEG1                                                                 12/07/2023 18:23:06 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AUXR . . . . . . .  N NUMB   008EH   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
MAIN . . . . . . .  C ADDR   0200H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P_INIT . . . . . .  C ADDR   0212H   A   
SEG. . . . . . . .  C ADDR   0408H   A   
T0_ISR . . . . . .  C ADDR   0400H   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TIMER0_INIT. . . .  C ADDR   022EH   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
