	ORG 0000H
	LJMP MAIN
//	ORG 001BH
//	LJMP T1_ISR

   	ORG 0100H
MAIN:
	MOV 93H,#00H  ;p0推挽模式,位选通
	MOV 94H,#0FFH
	MOV 91H,#00H  ;P1推挽模式，段选通
	MOV 92H,#0FFH
	MOV 95H,#00H  ;P2推挽模式
	MOV 96H,#0FFH
	MOV TMOD,#00H ;T1-mode1, T0-mode1
	MOV TH0,#0F8H
	MOV TL0,#0CDH
TIME1:

//	MOV SP,#50H
//	MOV TMOD,#00H ;T1-mode1, T0-mode1
//	MOV TH0,#0F8H
//	MOV TL0,#0CDH
//	MOV R1,#8
//LOOP:
//	LCALL DISPLAY
//	SJMP LOOP
//DISPLAY:
////	PUSH ACC
////	PUSH 00H
////	PUSH 01H
////	CLR A
//	SETB ET1
//	SETB EA
//	SETB TR1
//
//
//	RET	
//T1_ISR:
//	CLR TR0
//	MOV DPTR,#SEGTABLE
//	MOV A,@A+DPTR
//	RETI
//
//SELECT:
//	
//	
;位码低有效
SEG1:	
	MOV B,#11111110B
	MOV P0,B 
	MOV A,#3FH
	MOV P1,A
	LCALL DELAY1MS
SEG2:	
	MOV B,#11111101B
	MOV P0,B 
	MOV A,#06H
	MOV P1,A
	LCALL DELAY1MS
SEG3:
	MOV B,#11111011B
	MOV P0,B 
	MOV A,#5BH
	MOV P1,A
	LCALL DELAY1MS
SEG4:
	MOV B,#11110111B
	MOV P0,B 
	MOV A,#4FH
	MOV P1,A
	LCALL DELAY1MS
SEG5:
	MOV B,#11101111B
	MOV P0,B 
	MOV A,#66H
	MOV P1,A
	LCALL DELAY1MS
SEG6:
	MOV B,#11011111B
	MOV P0,B 
	MOV A,#6DH
	MOV P1,A
	LCALL DELAY1MS
SEG7:
	MOV B,#10111111B
	MOV P0,B 
	MOV A,#7DH
	MOV P1,A
	LCALL DELAY1MS
SEG8:
	MOV B,#01111111B
	MOV P0,B 
	MOV A,#07H
	MOV P1,A
	LCALL DELAY1MS
	LJMP MAIN	
//
//	ORG 0500H
//SEGTAB: ;段码
//	DB 3FH,06H,5BH,4FH,66H,6DH,7DH,07H
//	ORG 0600H
//SELECT:
//	DB 0FEH,0FDH,0FBH,0F7H,0EFH,0DFH,0BFH,07FH	

DELAY2MS:			;@11.0592MHz
	NOP
	NOP
	NOP
	NOP
	PUSH	30H
	PUSH	31H
	MOV		30H,#18
	MOV		31H,#48
NEXT:
	DJNZ	31H,NEXT
	DJNZ	30H,NEXT
	POP		31H
	POP		30H
	RET
DELAY1MS:			;@11.0592MHz
	PUSH	30H
	PUSH	31H
	MOV		30H,#9
	MOV		31H,#150
NEXT2:
	DJNZ	31H,NEXT2
	DJNZ	30H,NEXT2
	POP		31H
	POP		30H
	RET



	END


